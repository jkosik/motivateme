<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MotivateMe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script type="module" src="./app.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #ffffff;
      color: #1a1a1a;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 480px;
      width: 100%;
    }

    h1 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 40px;
      color: #000;
      letter-spacing: -0.5px;
    }

    .section {
      margin-bottom: 32px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 8px;
    }

    .info {
      color: #6b7280;
      font-size: 14px;
      flex: 1;
    }

    .info.connected {
      color: #10b981;
      font-weight: 500;
    }

    button {
      background: #000;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      min-width: 140px;
    }

    button:hover {
      background: #333;
    }

    button:active {
      transform: scale(0.98);
    }

    button:disabled {
      background: #e5e7eb;
      color: #9ca3af;
      cursor: not-allowed;
    }

    select {
      background: #fff;
      color: #1a1a1a;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px 16px;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.15s ease;
      min-width: 140px;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%231a1a1a' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px;
    }

    select:hover {
      border-color: #9ca3af;
    }

    select:focus {
      outline: none;
      border-color: #000;
    }

    input[type="number"],
    input[type="text"] {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px 16px;
      font-size: 15px;
      transition: all 0.15s ease;
      width: 100%;
      margin-bottom: 12px;
    }

    input[type="number"]:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: #000;
    }

    .contract-info {
      margin-top: 48px;
      padding-top: 24px;
      border-top: 1px solid #e5e7eb;
      font-size: 13px;
      color: #9ca3af;
    }

    .contract-address {
      font-family: 'Courier New', monospace;
      word-break: break-all;
      margin-top: 4px;
      color: #667eea;
      text-decoration: none;
      transition: color 0.15s ease;
    }

    .contract-address:hover {
      color: #5568d3;
      text-decoration: underline;
    }

    .hidden {
      display: none;
    }

    /* Modal styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }

    .modal {
      background: white;
      border-radius: 16px;
      padding: 32px;
      max-width: 420px;
      width: 100%;
      position: relative;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 24px;
      text-align: center;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      color: #9ca3af;
      cursor: pointer;
      padding: 4px 8px;
      min-width: auto;
    }

    .modal-close:hover {
      color: #000;
      background: none;
      transform: none;
    }

    .wallet-options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .wallet-option {
      display: flex;
      align-items: center;
      padding: 16px;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.15s ease;
      background: white;
      text-align: left;
    }

    .wallet-option:hover {
      border-color: #667eea;
      background: #f8f9fa;
      transform: none;
    }

    .wallet-option-icon {
      font-size: 24px;
      margin-right: 12px;
    }

    .wallet-option-text {
      flex: 1;
    }

    .wallet-option-title {
      font-weight: 600;
      font-size: 15px;
      margin-bottom: 2px;
    }

    .wallet-option-desc {
      font-size: 13px;
      color: #6b7280;
    }

    .qr-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    #qrcode {
      padding: 20px;
      background: white;
      border-radius: 12px;
      border: 2px solid #e5e7eb;
      display: inline-block;
    }

    #qrcode img,
    #qrcode canvas {
      display: block;
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
      image-rendering: pixelated;
    }

    .qr-instructions {
      text-align: center;
      color: #6b7280;
      font-size: 14px;
    }

    .qr-timer {
      font-size: 13px;
      color: #9ca3af;
      text-align: center;
    }

    @media (max-width: 640px) {
      h1 {
        font-size: 28px;
      }
      .row {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      button, select {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>MotivateMe</h1>

    <div class="section">
      <div class="row">
        <button id="connectBtn">Connect wallet</button>
        <div class="info" id="walletInfo">Not connected</div>
      </div>
    </div>

    <div class="section hidden" id="actionsSection">
      <div class="row">
        <input type="text" id="recipientInput" placeholder="Recipient address (0x...)" />
      </div>
      <div class="row">
        <select id="functionSelect">
          <option value="">Select Motivation</option>
          <option value="read">Read counter</option>
          <option value="increment">Increment +1</option>
          <option value="set">Set value</option>
        </select>
        <div class="info" id="functionInfo">â€”</div>
      </div>
      <div id="setValueInput" class="hidden">
        <input type="number" id="valueInput" placeholder="Enter value" />
      </div>
    </div>

    <div class="contract-info">
      <div>Contract address</div>
      <a id="contractAddr" class="contract-address" href="#" target="_blank" rel="noopener noreferrer"></a>
    </div>
  </div>

  <script type="module">
    // ---- CONFIG ----
    // Testnet Configuration (Ink Sepolia)
    const INK_SEPOLIA = {
      chainId: '0xba5ed',                     // 763373 in hex
      chainIdDecimal: 763373,
      chainName: 'Ink Sepolia',
      nativeCurrency: { name: 'Ether', symbol: 'ETH', decimals: 18 },
      rpcUrls: ['https://rpc-gel-sepolia.inkonchain.com'],
      blockExplorerUrls: ['https://explorer-sepolia.inkonchain.com']
    };

    // Mainnet Configuration (Ink)
    const INK_MAINNET = {
      chainId: '0xdf11',                      // 57073 in hex
      chainIdDecimal: 57073,
      chainName: 'Ink',
      nativeCurrency: { name: 'Ether', symbol: 'ETH', decimals: 18 },
      rpcUrls: ['https://rpc-gel.inkonchain.com'],
      blockExplorerUrls: ['https://explorer.inkonchain.com']
    };

    // Select to INK_MAINNET or INK_SEPOLIA
    // const ACTIVE_NETWORK = INK_SEPOLIA;
    const ACTIVE_NETWORK = INK_MAINNET;

    // Address is based on nonce (transaction count) and Deployer address. If we use fresh new wallet, nonce is 0
    // and the address is the same on Testnet and Mainnet.
    const CONTRACT_ADDRESS = '0x4fcC5C461B59ECC4786CDa6Ec270bA29Eb657FAF';

    // WalletConnect v2 Project ID from https://dashboard.reown.com
    const WALLETCONNECT_PROJECT_ID = 'd608436759f83467578a0fda722d7542';

    // Minimal ABI for Counter
    const ABI = [
      { "inputs": [], "name": "increment", "outputs": [], "stateMutability": "nonpayable", "type": "function" },
      { "inputs": [ { "internalType": "uint256", "name": "newNumber", "type": "uint256" } ],
        "name": "setNumber", "outputs": [], "stateMutability": "nonpayable", "type": "function" },
      { "inputs": [], "name": "number", "outputs": [ { "internalType": "uint256", "name": "", "type": "uint256" } ],
        "stateMutability": "view", "type": "function" }
    ];

    // Initialize the app with configuration
    window.addEventListener('DOMContentLoaded', () => {
      if (window.initializeApp) {
        window.initializeApp({
          ACTIVE_NETWORK,
          CONTRACT_ADDRESS,
          ABI,
          WALLETCONNECT_PROJECT_ID
        });
      }
    });
  </script>
</body>
</html>
